From b7a478c35cd71ba87bdd9a600247dc12746c2a46 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Pascal=20J=C3=A4ger?= <pascal.jaeger@leimstift.de>
Date: Thu, 10 Oct 2024 10:09:37 +0200
Subject: [PATCH] fix build for boost 1.85
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Pascal JÃ¤ger <pascal.jaeger@leimstift.de>
---
 client_generic/Client/Player.cpp               |  7 +++++++
 client_generic/Client/lua_playlist.h           |  8 +++++++-
 client_generic/ContentDecoder/graph_playlist.h |  7 +++++++
 client_generic/TupleStorage/luastorage.cpp     | 10 ++++++++++
 4 files changed, 31 insertions(+), 1 deletion(-)

diff --git a/client_generic/Client/Player.cpp b/client_generic/Client/Player.cpp
index 1f65d761..2cbc0bb1 100644
--- a/client_generic/Client/Player.cpp
+++ b/client_generic/Client/Player.cpp
@@ -58,9 +58,14 @@
 #include	"LinearFrameDisplay.h"
 #include	"CubicFrameDisplay.h"
 
+#include	<boost/version.hpp>
 #include	"boost/filesystem/path.hpp"
 #include	"boost/filesystem/operations.hpp"
+#if BOOST_VERSION < 108500
 #include	"boost/filesystem/convenience.hpp"
+#else // BOOST_VERSION >= 1.85
+#include	"boost/filesystem/directory.hpp"
+#endif
 
 #if defined(MAC) || defined(WIN32)
 	#define HONOR_VBL_SYNC
@@ -69,7 +74,9 @@
 using boost::filesystem::path;
 using boost::filesystem::exists;
 using boost::filesystem::directory_iterator;
+#if BOOST_VERSION < 108500
 using boost::filesystem::extension;
+#endif
 
 using namespace DisplayOutput;
 
diff --git a/client_generic/Client/lua_playlist.h b/client_generic/Client/lua_playlist.h
index fbe5a333..073438f0 100644
--- a/client_generic/Client/lua_playlist.h
+++ b/client_generic/Client/lua_playlist.h
@@ -15,15 +15,21 @@
 #include "isaac.h"
 #include "ContentDownloader.h"
 
+#include	<boost/version.hpp>
 #include	"boost/filesystem/path.hpp"
 #include	"boost/filesystem/operations.hpp"
+#if BOOST_VERSION < 108500
 #include	"boost/filesystem/convenience.hpp"
-#include	<boost/thread.hpp>
+#else // BOOST_VERSION >= 1.85
+#include	"boost/filesystem/directory.hpp"
+#endif
 
 using boost::filesystem::path;
 using boost::filesystem::exists;
 using boost::filesystem::directory_iterator;
+#if BOOST_VERSION < 108500
 using boost::filesystem::extension;
+#endif
 
 
 //	Lua.
diff --git a/client_generic/ContentDecoder/graph_playlist.h b/client_generic/ContentDecoder/graph_playlist.h
index 1f0a6cd0..d1b75da4 100644
--- a/client_generic/ContentDecoder/graph_playlist.h
+++ b/client_generic/ContentDecoder/graph_playlist.h
@@ -11,15 +11,22 @@
 #include <sstream>
 
 
+#include	<boost/version.hpp>
 #include	"boost/filesystem/path.hpp"
 #include	"boost/filesystem/operations.hpp"
+#if BOOST_VERSION < 108500
 #include	"boost/filesystem/convenience.hpp"
+#else // BOOST_VERSION >= 1.85
+#include	"boost/filesystem/directory.hpp"
+#endif
 
 using boost::filesystem::path;
 using boost::filesystem::exists;
 using boost::filesystem::no_check;
 using boost::filesystem::directory_iterator;
+#if BOOST_VERSION < 108500
 using boost::filesystem::extension;
+#endif
 
 namespace ContentDecoder
 {
diff --git a/client_generic/TupleStorage/luastorage.cpp b/client_generic/TupleStorage/luastorage.cpp
index efbe8867..b5db72d3 100644
--- a/client_generic/TupleStorage/luastorage.cpp
+++ b/client_generic/TupleStorage/luastorage.cpp
@@ -7,14 +7,24 @@
 #include	"luastorage.h"
 #include	"clientversion.h"
 
+#include	<boost/version.hpp>
 #include	"boost/filesystem/path.hpp"
 #include	"boost/filesystem/operations.hpp"
+#if BOOST_VERSION < 108500
 #include	"boost/filesystem/convenience.hpp"
+#else // BOOST_VERSION >= 1.85
+#include	"boost/filesystem/directory.hpp"
+#endif
+#include	"boost/filesystem/path.hpp"
+#include	"boost/filesystem/operations.hpp"
+#include	"boost/filesystem/directory.hpp"
 
 using boost::filesystem::path;
 using boost::filesystem::exists;
 using boost::filesystem::directory_iterator;
+#if BOOST_VERSION < 108500
 using boost::filesystem::extension;
+#endif
 
 using namespace std;
 
