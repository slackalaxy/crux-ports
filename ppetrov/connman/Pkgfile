# Description: A command-line network manager
# URL: https://mirrors.edge.kernel.org/pub/linux/network/connman/
# Maintainer: Petar Petrov, slackalaxy at gmail dot com
# Depends on: glib gnutls libmnl wpa_supplicant

name=connman
version=1.42
release=3
source=(https://www.kernel.org/pub/linux/network/connman/$name-$version.tar.gz
	connmand.rc allow_group_network.diff)

build() {
	cd $name-$version
	patch -Np1 -i $SRC/allow_group_network.diff
	
	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--localstatedir=/var \
		--enable-polkit \
		--enable-openvpn \
		--enable-client \
		--enable-pie \
		--enable-nmcompat \
		--enable-test \
		--disable-vpnc \
		--disable-openconnect \
		--disable-pptp \
		--disable-iwd
	
	make
	make install DESTDIR=$PKG
	
	install -Dm644 src/main.conf $PKG/etc/connman/main.conf
	install -D -m 0755 $SRC/connmand.rc $PKG/etc/rc.d/connmand
}
