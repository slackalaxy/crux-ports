# Description: Graphical tool for merging and comparing text files
# URL: https://github.com/MightyCreak/diffuse
# Maintainer: Petar Petrov, slackalaxy at gmail dot com
# Depends on:

name=diffuse
version=0.9.0
release=2
source=(https://github.com/MightyCreak/diffuse/archive/v$version/$name-$version.tar.gz)

build() {
  meson setup $name-$version build   \
              --buildtype=plain      \
              --prefix=/usr          \
              --wrap-mode nodownload \
              -Db_pie=true           \
              -Db_lto=true

  meson compile -C build -j ${JOBS:-1}
  DESTDIR="$PKG" meson install -C build

  rm -rf $PKG/usr/share/locale
  rm -rf $PKG/usr/share/gnome/help/diffuse/{cs,it,ru}
  rm -rf $PKG/usr/share/man/{cs,it,ru}
  rm -rf $PKG/usr/share/omf/diffuse/diffuse-{cs,it.ru}.omf
}
